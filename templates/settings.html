{% extends "template.html" %}
{% block head %}
    <script src="/static/js/settings.js"></script>
{% endblock %}
{% block content %}
    <div class="container">
      <div class="row">
        <div class="span12">
          <h1 class="page-header">
            Settings
          </h1>

          {% if context.flash %}
            <div class="alert alert-{{context.flash['class']}}">
              {{context.flash['message']}}
            </div>
          {% endif %}
          <form class="form-horizontal" method="post">
            <div class="control-group">
              <label class="control-label">Player name</label>
              <div class="controls">
                <input class="span4" name="player_name" type="text" value="{{context.player_name}}">
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Show splash screen</label>
              <div class="controls">
                <label id="splash_checkbox"  class="checkbox toggle well">
                  {% if context.show_splash %}
                    <input name="show_splash" checked="checked" type="checkbox" />
                  {% else %}
                    <input name="show_splash" type="checkbox" />
                  {% endif %}
                  <p>
                    <span class="on">On</span>
                    <span class="off">Off</span>
                  </p>
                  <a class="btn btn-primary slide-button"></a>
                </label>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Shuffle playlist</label>
              <div class="controls">
                <label id="shuffle_checkbox" class="checkbox toggle well">
                  {% if context.shuffle_playlist %}
                    <input name="shuffle_playlist" checked="checked" type="checkbox" />
                  {% else %}
                    <input name="shuffle_playlist" type="checkbox" />
                  {% endif %}
                  <p>
                    <span class="on">On</span>
                    <span class="off">Off</span>
                  </p>
                  <a class="btn btn-primary slide-button"></a>
                </label>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Audio output</label>
              <div class="controls">
                <select class="span2" name="audio_output">
                  {% if context.audio_output == 'hdmi' %}
                    <option value="hdmi" selected="selected">HDMI</option>
                    <option value="local" >3.5mm jack</option>
                  {% else %}
                    <option value="hdmi">HDMI</option>
                    <option value="local" selected="selected">3.5mm jack</option>
                  {% endif %}
                </select>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Default duration</label>
              <div class="controls">
                <input class="span1" name="default_duration" type="number" value={{context.default_duration}} />
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Default streaming duration</label>
              <div class="controls">
                <input class="span1" name="default_streaming_duration" type="number" value={{context.default_streaming_duration}} />
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Use 24-hour clock</label>
              <div class="controls">
                <label id="use_24_hour_clock_checkbox" class="checkbox toggle well">
                  {% if context.use_24_hour_clock %}
                    <input name="use_24_hour_clock" checked="checked" type="checkbox" />
                  {% else %}
                    <input name="use_24_hour_clock" type="checkbox" />
                  {% endif %}
                  <p>
                    <span class="on">On</span>
                    <span class="off">Off</span>
                  </p>
                  <a class="btn btn-primary slide-button"></a>
                </label>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Debug logging</label>
              <div class="controls">
                <label id="debug_checkbox" class="checkbox toggle well">
                  {% if context.debug_logging %}
                    <input name="debug_logging" checked="checked" type="checkbox">
                  {% else %}
                    <input name="debug_logging" type="checkbox">
                  {% endif %}
                  <p>
                    <span class="on">On</span>
                    <span class="off">Off</span>
                  </p>
                  <a class="btn btn-primary slide-button"></a>
                </label>
              </div>
            </div>

            <div class="control-group">
              <label class="control-label">Use Authentication</label>
              <div class="controls">
                <label id="auth_checkbox"  class="checkbox toggle well">
                  {% if context.use_auth %}
                    <input name="use_auth" checked="checked" type="checkbox" />
                  {% else %}
                    <input name="use_auth" type="checkbox" />
                  {% endif %}
                  <p>
                    <span class="on">On</span>
                    <span class="off">Off</span>
                  </p>
                  <a class="btn btn-primary slide-button"></a>
                </label>
              </div>
            </div>
            <div class="control-group" id="user_group">
              <label class="control-label">User</label>
              <div class="controls">
                <input class="span4" name="user" type="text" value="{{context.user}}">
              </div>
            </div>
            {% if context.password != "" %}
            <div class="control-group" id="curpassword_group">
              <label class="control-label">Current Password</label>
              <div class="controls">
                <input class="span4" name="curpassword" type="password" value="">
              </div>
            </div>
            {% endif %}
            <div class="control-group" id="password_group">
              <label class="control-label">Password</label>
              <div class="controls">
                <input class="span4" name="password" type="password" value="">
              </div>
            </div>
            <div class="control-group" id="password2_group">
              <label class="control-label">Confirm Password</label>
              <div class="controls">
                <input class="span4" name="password2" type="password" value="">
              </div>
            </div>

            <div class="form-actions">
              <input class="btn btn-primary" type="submit" value="Save Settings">
              <a class="btn" href="/">Cancel</a>
            </div>
          </form>
        </div>

        <div id="wifi-section" class="span12">
          <h1 class="page-header">
            Reset wifi config
          </h1>
          <p>Run it, and if the next boot does not have a network connection, you will be prompted to select a WiFi network. <br><b>Warning:</b> after pressing, a reboot is required. Web interface will not be available until reboot.</p>
          <div class="form-actions">
            <button id="btn-reset" class="btn btn-primary" type="button">Re-run network detection</button>
            </div>
        </div>

        <div id="backup-section" class="span12">
          <h1 class="page-header">
            Backup
          </h1>
          <div class="form-actions">
            <input name="backup_upload" style="display:none" type="file">
            <button id="btn-upload" class="btn btn-primary" type="button">Upload and Recover</button>
            <button id="btn-backup" class="btn">Get backup</button>
            <div class="progress progress-striped active" style="display:none">
              <div class="bar"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
{% endblock %}
